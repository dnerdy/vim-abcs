#!/bin/bash -eu

set -o pipefail

MYDIR=$(dirname $0)
ROOT="$MYDIR/.."
SLIDES="$ROOT/slides"

if [ $# -ne 1 ]; then
    cat <<EOF
usage: $0 NUM

Insert a slide at NUM position.
EOF
    exit 1
fi

insertion_number=$1

function slide_file() {
    num=$1
    echo "$SLIDES/$(printf %02d $num).txt"
}

slide_num=$(ls "$SLIDES" | wc -l)

while [[ $slide_num -ge $insertion_number ]]; do
    mv "$(slide_file $slide_num)" "$(slide_file $(($slide_num + 1)))"
    slide_num=$(($slide_num - 1))
done

touch "$(slide_file $insertion_number)"
